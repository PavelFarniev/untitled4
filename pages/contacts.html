<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
    <title>–ö–æ–Ω—Ç–∞–∫—Ç—ã</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="../styles/styles.css">
</head>
<body>
<a href="#main" class="skip-link">–ü—Ä–æ–ø—É—Å—Ç–∏—Ç—å –∫ —Å–æ–¥–µ—Ä–∂–∏–º–æ–º—É</a>

<header class="header text-center py-4 shadow-sm bg-white sticky-top" role="banner">
    <div class="container">
        <img src="../images/logo.png" alt="–õ–æ–≥–æ—Ç–∏–ø" class="header__logo mb-2">
        <h1 class="header__title">–ê—Ä—Ç—ë–º –§–∞—Ä–Ω–∏–µ–≤</h1>
        <nav class="nav justify-content-center mt-3" aria-label="–ì–ª–∞–≤–Ω–∞—è –Ω–∞–≤–∏–≥–∞—Ü–∏—è">
            <a href="../index.html" class="nav__link">–ì–ª–∞–≤–Ω–∞—è</a>
            <a href="projects.html" class="nav__link">–ü—Ä–æ–µ–∫—Ç—ã</a>
            <a href="diary.html" class="nav__link">–î–Ω–µ–≤–Ω–∏–∫</a>
            <a href="contacts.html" class="nav__link nav__link--active" aria-current="page">–ö–æ–Ω—Ç–∞–∫—Ç—ã</a>
        </nav>
    </div>
</header>

<main id="main" class="main-content container my-5" role="main">
    <section class="section-card p-4">
        <h2 id="contacts-title" class="section-title text-center mb-4">–°–≤—è–∂–∏—Ç–µ—Å—å —Å–æ –º–Ω–æ–π</h2>

        <form id="contactForm"
              class="contact-form mx-auto"
              style="max-width: 600px;"
              role="form"
              aria-labelledby="contacts-title"
              novalidate>
            <fieldset>
                <legend class="visually-hidden">–î–∞–Ω–Ω—ã–µ –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—è</legend>

                <div class="mb-3">
                    <label for="contactName" class="form-label">–ò–º—è <span aria-hidden="true" class="text-danger">*</span></label>
                    <input type="text"
                           id="contactName"
                           name="contactName"
                           class="form-control"
                           required
                           aria-required="true"
                           aria-describedby="contactNameHelp contactNameError"
                           minlength="2">
                    <div id="contactNameHelp" class="form-text">–£–∫–∞–∂–∏—Ç–µ –≤–∞—à–µ –∏–º—è (–º–∏–Ω–∏–º—É–º 2 —Å–∏–º–≤–æ–ª–∞).</div>
                    <div id="contactNameError" class="field-error" aria-live="assertive"></div>
                </div>

                <div class="mb-3">
                    <label for="contactEmail" class="form-label">Email <span aria-hidden="true" class="text-danger">*</span></label>
                    <input type="email"
                           id="contactEmail"
                           name="contactEmail"
                           class="form-control"
                           required
                           aria-required="true"
                           aria-describedby="contactEmailHelp contactEmailError">
                    <div id="contactEmailHelp" class="form-text">–ú—ã –æ—Ç–ø—Ä–∞–≤–∏–º –æ—Ç–≤–µ—Ç –Ω–∞ —ç—Ç—É –ø–æ—á—Ç—É.</div>
                    <div id="contactEmailError" class="field-error" aria-live="assertive"></div>
                </div>

                <div class="mb-3">
                    <label for="topic" class="form-label">–¢–µ–º–∞ –æ–±—Ä–∞—â–µ–Ω–∏—è</label>
                    <select id="topic" name="topic" class="form-select" aria-describedby="topicHelp">
                        <option value="question">–û–±—â–∏–π –≤–æ–ø—Ä–æ—Å</option>
                        <option value="complaint">–ñ–∞–ª–æ–±–∞ –Ω–∞ –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏–µ</option>
                        <option value="suggestion">–ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ –ø–æ —É–ª—É—á—à–µ–Ω–∏—é</option>
                    </select>
                    <div id="topicHelp" class="form-text">–í—ã–±–µ—Ä–∏—Ç–µ —Ç–µ–º—É, —á—Ç–æ–±—ã –º—ã –º–æ–≥–ª–∏ –±—ã—Å—Ç—Ä–µ–µ –æ–±—Ä–∞–±–æ—Ç–∞—Ç—å –æ–±—Ä–∞—â–µ–Ω–∏–µ.</div>
                </div>
            </fieldset>

            <fieldset>
                <legend class="visually-hidden">–°–æ–æ–±—â–µ–Ω–∏–µ</legend>

                <div class="mb-3">
                    <label for="contactMessage" class="form-label">–°–æ–æ–±—â–µ–Ω–∏–µ <span aria-hidden="true" class="text-danger">*</span></label>
                    <textarea id="contactMessage"
                              name="contactMessage"
                              class="form-control"
                              rows="5"
                              required
                              aria-required="true"
                              aria-describedby="contactMessageHelp contactMessageError"></textarea>
                    <div id="contactMessageHelp" class="form-text">–û–ø–∏—à–∏—Ç–µ –≤–∞—à –≤–æ–ø—Ä–æ—Å –∏–ª–∏ –ø–æ–∂–µ–ª–∞–Ω–∏–µ.</div>
                    <div id="contactMessageError" class="field-error" aria-live="assertive"></div>
                </div>
            </fieldset>

            <button type="submit" class="btn btn-primary w-100" id="submitBtn" aria-label="–û—Ç–ø—Ä–∞–≤–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ">–û—Ç–ø—Ä–∞–≤–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ</button>

            <div id="form-status" role="status" aria-live="polite" aria-atomic="true" class="mt-3 visually-hidden"></div>
        </form>

        <div class="contacts mt-5 text-center">
            <p>üìß <a href="mailto:Artemfarniev2013@gmail.com" class="contact-link">Artemfarniev2013@gmail.com</a></p>
            <p>üì± GitHub:
                <a href="https://github.com/PavelFarniev" target="_blank" class="contact-link" rel="noopener">PavelFarniev</a>
            </p>
            <p>üìç –ú–æ—Å–∫–≤–∞, –†–æ—Å—Å–∏—è</p>
        </div>
    </section>
</main>

<!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —É—Å–ø–µ—à–Ω–æ–π –æ—Ç–ø—Ä–∞–≤–∫–∏ -->
<div class="modal fade" id="successModal" tabindex="-1" aria-labelledby="successModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content section-card" role="dialog" aria-modal="true" aria-labelledby="successModalLabel">
            <div class="modal-header border-bottom-0 pb-0">
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="–ó–∞–∫—Ä—ã—Ç—å"></button>
            </div>
            <div class="modal-body text-center py-4">
                <div class="success-icon">
                    <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="#fff" stroke-width="3">
                        <path d="M20 6L9 17l-5-5" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                </div>
                <h3 class="modal-title mb-3" id="successModalLabel">–°–æ–æ–±—â–µ–Ω–∏–µ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ!</h3>
                <p class="mb-0 text-muted">–í–∞—à–µ —Å–æ–æ–±—â–µ–Ω–∏–µ —É—Å–ø–µ—à–Ω–æ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ. –ú—ã —Å–≤—è–∂–µ–º—Å—è —Å –≤–∞–º–∏ –≤ –±–ª–∏–∂–∞–π—à–µ–µ –≤—Ä–µ–º—è.</p>
            </div>
            <div class="modal-footer border-top-0 pt-0">
                <button type="button" class="btn btn-primary w-100" data-bs-dismiss="modal">–ü–æ–Ω—è—Ç–Ω–æ</button>
            </div>
        </div>
    </div>
</div>

<footer class="footer text-center py-3 bg-white border-top shadow-sm" role="contentinfo">
    <p>¬© 2025</p>
</footer>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

<script>
    (function () {
        const form = document.getElementById('contactForm');
        const nameInput = document.getElementById('contactName');
        const emailInput = document.getElementById('contactEmail');
        const topicInput = document.getElementById('topic');
        const messageInput = document.getElementById('contactMessage');

        const nameError = document.getElementById('contactNameError');
        const emailError = document.getElementById('contactEmailError');
        const messageError = document.getElementById('contactMessageError');
        const status = document.getElementById('form-status');

        // –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ
        const successModal = new bootstrap.Modal(document.getElementById('successModal'));

        function isValidEmail(email) {
            return /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email);
        }

        function setFieldError(input, errorElement, message) {
            input.setAttribute('aria-invalid', 'true');
            errorElement.textContent = message;
        }

        function clearFieldError(input, errorElement) {
            input.removeAttribute('aria-invalid');
            errorElement.textContent = '';
        }

        form.addEventListener('submit', function (e) {
            e.preventDefault();
            let firstInvalid = null;
            status.textContent = '';

            clearFieldError(nameInput, nameError);
            clearFieldError(emailInput, emailError);
            clearFieldError(messageInput, messageError);

            if (!nameInput.value || nameInput.value.trim().length < 2) {
                setFieldError(nameInput, nameError, '–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–≤–µ–¥–∏—Ç–µ –∏–º—è (–º–∏–Ω–∏–º—É–º 2 —Å–∏–º–≤–æ–ª–∞).');
                if (!firstInvalid) firstInvalid = nameInput;
            }

            if (!emailInput.value || !isValidEmail(emailInput.value.trim())) {
                setFieldError(emailInput, emailError, '–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–≤–µ–¥–∏—Ç–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π email.');
                if (!firstInvalid) firstInvalid = emailInput;
            }

            if (!messageInput.value || messageInput.value.trim().length === 0) {
                setFieldError(messageInput, messageError, '–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–≤–µ–¥–∏—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ.');
                if (!firstInvalid) firstInvalid = messageInput;
            }

            if (firstInvalid) {
                firstInvalid.focus();
                status.textContent = '–§–æ—Ä–º–∞ —Å–æ–¥–µ—Ä–∂–∏—Ç –æ—à–∏–±–∫–∏. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤—ã–¥–µ–ª–µ–Ω–Ω—ã–µ –ø–æ–ª—è.';
                status.classList.remove('visually-hidden');
                return;
            }

            // –ò–º–∏—Ç–∏—Ä—É–µ–º –æ—Ç–ø—Ä–∞–≤–∫—É –∏ –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ
            status.textContent = '–°–æ–æ–±—â–µ–Ω–∏–µ —É—Å–ø–µ—à–Ω–æ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ. –°–ø–∞—Å–∏–±–æ!';
            status.classList.remove('visually-hidden');

            // –°–±—Ä–∞—Å—ã–≤–∞–µ–º —Ñ–æ—Ä–º—É
            form.reset();
            clearFieldError(nameInput, nameError);
            clearFieldError(emailInput, emailError);
            clearFieldError(messageInput, messageError);

            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ
            successModal.show();

            // –°–∫—Ä—ã–≤–∞–µ–º —Ç–µ–∫—Å—Ç–æ–≤—ã–π —Å—Ç–∞—Ç—É—Å
            setTimeout(() => {
                status.classList.add('visually-hidden');
            }, 3000);
        });

        [nameInput, emailInput, messageInput].forEach(input => {
            input.addEventListener('input', () => {
                const errEl = document.getElementById(input.id + 'Error');
                if (errEl && errEl.textContent) {
                    clearFieldError(input, errEl);
                }
            });
        });

        status.tabIndex = -1;
    })();
</script>
</body>
</html>